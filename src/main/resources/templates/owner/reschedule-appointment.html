<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Reschedule Appointment</title>
    <link rel="stylesheet" th:href="@{/css/dashboard-modern.css}">
    <link rel="stylesheet" th:href="@{/css/owner-appointment-edit.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="owner-layout">
        <nav class="dashboard-nav">
            <h2>Owner Panel</h2>
            <ul>
                <li><a th:href="@{/owner/dashboard}">Dashboard</a></li>
                <li><a th:href="@{/owner/pets}">My Pets</a></li>
                <li><a th:href="@{/owner/appointments}">Appointments</a></li>
                <li><a th:href="@{/owner/prescriptions}">Prescriptions</a></li>
                <li><a th:href="@{/owner/doctors}">Doctors</a></li>
                <li><a th:href="@{/owner/messages}">Messages</a></li>
                <li>
                    <form th:action="@{/logout}" method="post" style="display:inline;">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" class="logout-link" style="background:none; border:none; color:#e0e7ef; font-size:1.13rem; padding:14px 0; margin:0 18px; text-align:center; width:100%; display:block; border-radius:8px; cursor:pointer; text-decoration:none; font-weight:500; transition:background 0.18s, color 0.18s, font-weight 0.18s; letter-spacing:0.5px;">Logout</button>
                    </form>
                </li>
            </ul>
        </nav>
        <main class="dashboard-content">
            <div class="page-header">
                <div class="icon"><i class="fas fa-calendar-edit"></i></div>
                <div class="title">Edit Appointment</div>
            </div>
            <div class="form-card">
                <div class="card-section-title">
                    <h3>Update Details</h3>
                    <div class="muted">Change date/time and optionally select a different veterinarian</div>
                </div>
                <form class="vet-form" th:action="@{/owner/appointments/{id}/reschedule(id=${appointment.id})}" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="newDateTime">New Date and Time</label>
                            <input class="form-control" type="datetime-local" id="newDateTime" name="newDateTime" required
                                   th:value="${appointment.dateTime != null ? #temporals.format(appointment.dateTime, 'yyyy-MM-dd''T''HH:mm') : ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newVetId">Select Veterinarian</label>
                            <select class="form-select" id="newVetId" name="newVetId">
                                <option value="">Keep Current</option>
                                <option th:each="vet : ${veterinarians}"
                                        th:value="${vet.id}"
                                        th:text="${vet.fullName}"
                                        th:selected="${vet.id == appointment.veterinarianId}">
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions" style="display:flex; gap:10px; justify-content:flex-end; margin-top: 12px;">
                        <a th:href="@{/owner/appointments}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <script th:src="@{/js/chatbot.js}"></script>
</body>
</html> 